{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { UseAuthStore } from \"@/store/store.js\";\nimport apiFetch from \"@/common/api.service.js\";\nimport loading from \"@/components/loadingAnimations/dot-animation.vue\";\nexport default {\n  name: 'login-vue',\n  data() {\n    return {\n      AuthStore: UseAuthStore(),\n      messageErreur: null,\n      username: \"\",\n      password: \"\",\n      serveurs: null,\n      ServerType: \"Prod\",\n      options: [\"Prod\", \"UAT\"],\n      LogingIn: false\n    };\n  },\n  methods: {\n    async userLogin() {\n      if (this.ServerType == null) {\n        this.messageErreur = \"Please select a server type.\";\n        return;\n      }\n      this.LogingIn = true;\n      let endpoint = \"/api/\" + this.ServerType + '/login';\n      // await fetch(endpoint, {\n      //     method: \"POST\",\n      //     credentials: \"include\", \n      //     headers: {\n      //       \"Content-Type\": \"application/json\",\n      //     },\n      //     body: JSON.stringify({\"username\" :  this.username , \"password\" : this.password}),\n      //   })\n\n      apiFetch.post(endpoint, {\n        \"username\": this.username,\n        \"password\": this.password\n      }, false).then(response => {\n        console.log(response);\n        this.AuthStore.setUsername = this.username;\n        this.AuthStore.setConnexionType = {\n          UAT: this.ServerType == 'Pord' ? false : true,\n          PROD: this.ServerType == 'Pord' ? true : false\n        };\n        var query = {};\n        if (this.ServerType == 'UAT') {\n          query = {\n            UAT: true\n          };\n        } else {\n          query = {\n            Prod: false\n          };\n        }\n        this.$router.push({\n          name: 'supervision',\n          query: {\n            ...query\n          }\n        });\n      }).catch(error => {\n        console.log(error);\n        this.LogingIn = false;\n        this.messageErreur = error.msg;\n      });\n    },\n    HideMe() {\n      this.messageErreur = null;\n    },\n    checkLogin() {\n      let endpoint = \"/api/UAT/logedin\";\n      apiFetch.get(endpoint, false).then(response => {\n        console.log(response);\n        this.AuthStore.username = response.username;\n        this.AuthStore.connexionType = {\n          UAT: true,\n          Prod: false\n        };\n        this.$router.push({\n          name: 'supervision',\n          query: {\n            UAT: true\n          }\n        });\n      }).catch(() => {\n        this.$router.push(\"/Server-Down\");\n      });\n    }\n  },\n  mounted() {\n    this.checkLogin();\n  },\n  components: {\n    loading\n  },\n  setup() {}\n};","map":{"version":3,"names":["UseAuthStore","apiFetch","loading","name","data","AuthStore","messageErreur","username","password","serveurs","ServerType","options","LogingIn","methods","userLogin","endpoint","post","then","response","console","log","setUsername","setConnexionType","UAT","PROD","query","Prod","$router","push","catch","error","msg","HideMe","checkLogin","get","connexionType","mounted","components","setup"],"sources":["/Users/abdelmadjidbelhanafi/Documents/vsc project/Natixis/new-banxy-rest-api/frontend/src/views/login.vue"],"sourcesContent":["<template>\n    <div v-if=\"!LogingIn\"  class=\"login-holder\" > \n      <div v-if=\"messageErreur\" @click=\"HideMe\"  class=\"erruer\">\n        <p>{{ messageErreur }}</p>\n      </div>\n        <form @submit.prevent=\"userLogin\" class=\"form_main\">\n          <p class=\"heading\">Login</p>\n          <div class=\"inputContainer\">\n                <svg class=\"inputIcon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#2e2e2e\" viewBox=\"0 0 16 16\">\n                <path d=\"M13.106 7.222c0-2.967-2.249-5.032-5.482-5.032-3.35 0-5.646 2.318-5.646 5.702 0 3.493 2.235 5.708 5.762 5.708.862 0 1.689-.123 2.304-.335v-.862c-.43.199-1.354.328-2.29.328-2.926 0-4.813-1.88-4.813-4.798 0-2.844 1.921-4.881 4.594-4.881 2.735 0 4.608 1.688 4.608 4.156 0 1.682-.554 2.769-1.416 2.769-.492 0-.772-.28-.772-.76V5.206H8.923v.834h-.11c-.266-.595-.881-.964-1.6-.964-1.4 0-2.378 1.162-2.378 2.823 0 1.737.957 2.906 2.379 2.906.8 0 1.415-.39 1.709-1.087h.11c.081.67.703 1.148 1.503 1.148 1.572 0 2.57-1.415 2.57-3.643zm-7.177.704c0-1.197.54-1.907 1.456-1.907.93 0 1.524.738 1.524 1.907S8.308 9.84 7.371 9.84c-.895 0-1.442-.725-1.442-1.914z\"></path>\n                </svg>\n            <input  v-model=\"username\" type=\"text\" class=\"inputField\" id=\"username\" placeholder=\"Username\">\n            </div>\n            \n            <div class=\"inputContainer\">\n                <svg class=\"inputIcon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#2e2e2e\" viewBox=\"0 0 16 16\">\n                <path d=\"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z\"></path>\n                </svg>\n                <input v-model=\"password\" type=\"password\" class=\"inputField\" id=\"password\" placeholder=\"Password\">\n            </div>\n\n\n                            \n            <div class=\"Choice\">\n                <select  v-model=\"ServerType\" >\n                <option  v-for=\"option , index in options\" :value=\"option\" :key=\"index\">{{ option }}</option>\n              </select>\n            </div>\n                        \n            <button id=\"button\">Submit</button>\n\n        </form>\n              \n    </div>\n    <loading class=\"containerAnimation\" v-else ></loading>\n\n</template>\n<script>\n\nimport { UseAuthStore } from \"@/store/store.js\"\nimport apiFetch from \"@/common/api.service.js\"\n\nimport loading from \"@/components/loadingAnimations/dot-animation.vue\"\n\n\nexport default{\n    name :'login-vue',\n    data(){\n      return{\n        AuthStore : UseAuthStore(),\n        messageErreur : null,\n        username : \"\",\n        password : \"\",\n        serveurs : null,\n        ServerType : \"Prod\",\n        options : [\"Prod\",\"UAT\"],\n        LogingIn : false,\n      }\n    },\n    methods : {\n      async userLogin(){\n        if(this.ServerType == null){\n          this.messageErreur = \"Please select a server type.\";\n          return ;\n        }\n        this.LogingIn = true;\n        let endpoint = \"/api/\" + this.ServerType+'/login';\n        // await fetch(endpoint, {\n        //     method: \"POST\",\n        //     credentials: \"include\", \n        //     headers: {\n        //       \"Content-Type\": \"application/json\",\n        //     },\n        //     body: JSON.stringify({\"username\" :  this.username , \"password\" : this.password}),\n        //   })\n\n        apiFetch.post(endpoint,{\"username\" :  this.username , \"password\" : this.password},false)\n        .then( (response)=>{\n          console.log(response);\n          this.AuthStore.setUsername = this.username;\n          this.AuthStore.setConnexionType = {\n              UAT : this.ServerType == 'Pord' ? false : true,\n              PROD : this.ServerType == 'Pord' ? true : false,\n          };\n          var query ={};\n           if(this.ServerType == 'UAT'){\n            query = {\n              UAT : true\n            }\n           }else{\n            query = {\n              Prod : false\n            }\n           }\n          this.$router.push({name : 'supervision' , query : { ...query }});\n        })\n        .catch( (error)=>{\n          console.log(error)\n          this.LogingIn = false;\n          this.messageErreur = error.msg;\n        });\n      },\n\n      HideMe(){\n        this.messageErreur = null;\n      },\n      checkLogin(){\n        let endpoint = \"/api/UAT/logedin\";\n        apiFetch.get(endpoint,false)\n        .then((response)=>{\n          console.log(response)\n          this.AuthStore.username = response.username;\n          this.AuthStore.connexionType = {\n            UAT : true,\n            Prod : false\n          };\n          this.$router.push({name : 'supervision' , query : { UAT :  true  }});\n        })\n        .catch(()=>{\n            this.$router.push(\"/Server-Down\");\n        })\n      }\n    },\n    mounted(){\n      this.checkLogin();\n    },\n    components: {\n      loading\n  },\n  setup(){\n\n  }\n\n}\n</script>\n<style scoped >\n.erruer{\n  position: absolute;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n\n  left: 0;\n  top: 0;\n\n  background-color: rgb(235, 72, 72);\n  color:var( --white-text-color);\n  font-weight : 500;\n\n  padding: 5px;\n  box-sizing: border-box;\n}\n.login-holder{\n  position:fixed;\n  top:0;\n  left: 0;\n  z-index: 99999;\n\n  height: 100vh;\n  width: 100vw;\n  background-color: var( --background-color);\n\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: center;\n\n    \n}\n.form_main {\n  width: 220px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--light-color-0);\n  padding: 30px 30px 30px 30px;\n  box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.062);\n  position: relative;\n  overflow: hidden;\n}\n\n.form_main::before {\n  position: absolute;\n  content: \"\";\n  width: 300px;\n  height: 300px;\n  background-color: var(--light-color-1);\n  transform: rotate(45deg);\n  left: -180px;\n  bottom: 30px;\n  z-index: 1;\n  border-radius: 30px;\n  box-shadow: 5px 5px 10px #00000015;\n}\n\n.heading {\n  font-size: 2em;\n  color: var(--dark-text-color);\n  font-weight: 700;\n  margin: 5px 0 10px 0;\n  z-index: 2;\n}\n\n.inputContainer {\n  width: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2;\n}\n\n.inputIcon {\n  position: absolute;\n  left: 3px;\n}\n\n.inputField {\n  width: 100%;\n  height: 30px;\n  background-color: transparent;\n  border: none;\n  border-bottom: 2px solid rgb(173, 173, 173);\n  margin: 10px 0;\n  color: var(--dark-text-color);\n  font-size: .8em;\n  font-weight: 500;\n  box-sizing: border-box;\n  padding-left: 30px;\n}\n\n.inputField:focus {\n  outline: none;\n  border-bottom: 2px solid rgb(199, 114, 255);\n}\n\n.inputField::placeholder {\n  color: var(--gray-text-color-1);\n  font-size: 1em;\n  font-weight: 500;\n}\n\n#button {\n  z-index: 2;\n  position: relative;\n  width: 100%;\n  border: none;\n  background-color: var( --warm-color-0);\n  height: 30px;\n  color: var(--white-text-color);\n  font-size: .8em;\n  font-weight: 500;\n  letter-spacing: 1px;\n  margin: 10px;\n  cursor: pointer;\n}\n\n#button:hover {\n  background-color: var(--warm-color-1 );\n}\n\n.Choice{\n  width: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  z-index: 2;\n\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}