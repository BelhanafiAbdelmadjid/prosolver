{"ast":null,"code":"import apiFetch from \"@/common/api.service\";\nimport interraction from \"./interraction-script.vue\";\nimport buttonValidation from \"@/components/interraction/buttons/validation-button.vue\";\nexport default {\n  name: 'script-create',\n  components: {\n    interraction,\n    buttonValidation\n  },\n  data() {\n    return {\n      step: {\n        name: '',\n        server: {\n          id: null\n        },\n        container: {\n          id: null\n        },\n        script: {\n          id: null\n        },\n        inputs: []\n      },\n      selectContainer: false,\n      containersSelect: []\n    };\n  },\n  watch: {\n    // 'step.server'(){\n    //     let server = this.req.servers.filter( server => server.id === this.step.server );\n    //     this.containersSelect =  server[0].containers;\n    // },\n    // selectContainer(newV,oldV){\n    //     if(oldV == false && newV == true){\n    //         if(this.step.server == null){\n    //             this.emitter.emit(\"sidebar-error\",{error : true , description : 'Please select a server first.'})\n    //             this.selectContainer = false;\n    //         }\n    //     }else if(oldV == true && newV == false){\n    //         this.containersSelect = [];\n    //     }\n    // },\n    // 'step.script'(){\n    //     let endpoint = '/incident/'+this.$route.params.id+'/script/'+this.step.script+'/join'\n    //     apiFetch.get(endpoint,false)\n    //     .then((inputs)=>{\n    //         this.step.inputs = inputs\n    //     })\n    // }\n  },\n  beforeMount() {\n    // incident/3/step/create\n\n    let endpoint = '/incident/' + this.$route.params.id + '/step/' + this.$route.params.stepID;\n    apiFetch.get(endpoint, false).then(req => {\n      this.step = req;\n    });\n  },\n  methods: {\n    createStep() {\n      for (let input of this.step.inputs) {\n        if (input.fromIncident == true) {\n          input.parentInput = input.incidentID;\n        }\n      }\n      let endpoint = '/incident/step/create';\n      apiFetch.post(endpoint, {\n        incident: this.$route.params.id,\n        server: this.step.server,\n        script: this.step.script,\n        container: this.step.container,\n        name: this.step.name,\n        inputs: this.step.inputs\n      }, true, false).then(res => {\n        console.log(res);\n      });\n    }\n  }\n};","map":{"version":3,"names":["apiFetch","interraction","buttonValidation","name","components","data","step","server","id","container","script","inputs","selectContainer","containersSelect","watch","beforeMount","endpoint","$route","params","stepID","get","then","req","methods","createStep","input","fromIncident","parentInput","incidentID","post","incident","res","console","log"],"sources":["/Users/abdelmadjidbelhanafi/Documents/vsc project/Natixis/new-banxy-rest-api/frontend/src/views/steps/show.vue"],"sourcesContent":["<template>\n    <interraction :forbiddenInputs=\"true\" >\n        <template #ScriptHeader >Creating new step</template>\n\n\n        <template #InputName >\n            <input disabled v-model=\"step.name\"  type=\"text\">\n        </template>\n        <template #InputScript >\n            <select disabled v-model=\"step.script.id\" >\n                <option v-for=\"script in req.scripts\" :key=\"script.id\" :value=\"script.id\">{{ script.name+'.'+script.language }}</option>\n            </select>\n        </template>\n        <template #InputServer >\n            <select disabled v-model=\"step.server.id\"  >\n                <option selected :value=\"step.server.id\">{{ step.server.name}}</option>\n            </select>\n        </template>\n        <template #InputContainerChekbox >\n        </template>\n        <template v-if=\"step.container\" #InputContainer >\n            <select disabled v-model=\"step.container.id\"  >\n                <option  :value=\"step.container.id\">{{ step.container.name}}</option>\n            </select>\n        </template>\n\n\n\n        <template #GlobalInputListing >\n            <div style=\"height: 100%;width: 100%;\" >\n                <div class=\"input-config-holder\" v-for=\"input,index in step.inputs\" :key=\"index\" >\n                    <div class=\"input-config-line\"   v-if=\"input.fromIncident\" >\n                        <p>Make <strong> {{ input.label +' ' }}</strong> input global.</p>\n                        <input type=\"checkbox\" v-model=\"input.fromIncident\">\n                    </div>\n                    <div class=\"input-config-line\"  v-else >\n                        <p>Local <strong> {{ input.label +' ' }} </strong> input.</p>\n                    </div>\n                    \n                </div>\n            </div>\n        </template>\n        <template #Footer >\n            <buttonValidation style=\"width: 100%;\"  @click=\"$router.push({name : 'stepEdit', params : { id : this.$route.params.id , stepID : this.$route.params.stepID }})\" :warning=\"true\" :type=\"'submit'\">\n                <template #textButton>\n                    Edit\n                </template>\n            </buttonValidation>\n        </template> \n\n        <template #popUps >\n            \n        </template>\n\n    </interraction>\n</template>\n<script>\nimport apiFetch from \"@/common/api.service\"\nimport interraction from \"./interraction-script.vue\"\nimport buttonValidation from \"@/components/interraction/buttons/validation-button.vue\"\nexport default{\n    name : 'script-create',\n    components : {\n        interraction,\n        buttonValidation\n    },\n    data(){\n        return{\n            step : {\n                name : '',\n                server : {\n                    id : null\n                } ,\n                container : {\n                    id : null\n                },\n                script : {\n                    id : null\n                },\n                inputs : []\n            },\n\n            selectContainer : false,\n            containersSelect : []\n        }\n    },\n    watch : {\n        // 'step.server'(){\n        //     let server = this.req.servers.filter( server => server.id === this.step.server );\n        //     this.containersSelect =  server[0].containers;\n        // },\n        // selectContainer(newV,oldV){\n        //     if(oldV == false && newV == true){\n        //         if(this.step.server == null){\n        //             this.emitter.emit(\"sidebar-error\",{error : true , description : 'Please select a server first.'})\n        //             this.selectContainer = false;\n        //         }\n        //     }else if(oldV == true && newV == false){\n        //         this.containersSelect = [];\n        //     }\n        // },\n        // 'step.script'(){\n        //     let endpoint = '/incident/'+this.$route.params.id+'/script/'+this.step.script+'/join'\n        //     apiFetch.get(endpoint,false)\n        //     .then((inputs)=>{\n        //         this.step.inputs = inputs\n        //     })\n        // }\n    },\n    beforeMount(){\n        // incident/3/step/create\n\n        let endpoint = '/incident/'+ this.$route.params.id+'/step/'+this.$route.params.stepID\n        apiFetch.get(endpoint,false)\n        .then((req)=>{\n            this.step= req;\n        })\n    },\n    methods : {\n        createStep(){\n\n            for(let input of this.step.inputs){\n                if(input.fromIncident == true){\n                    input.parentInput = input.incidentID;\n                }\n            }\n\n            let endpoint = '/incident/step/create';\n            apiFetch.post(endpoint,{\n                incident : this.$route.params.id,\n                server : this.step.server,\n                script : this.step.script,\n                container : this.step.container,\n                name : this.step.name,\n                inputs : this.step.inputs\n            },\n            true,\n            false)\n            .then((res)=>{\n\n                console.log(res)\n            })\n\n        }\n    }\n}\n</script>\n<style scoped>\n.input-config-holder{\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    justify-content: flex-start;\n\n    gap: 5px;\n    box-sizing: border-box;\n\n    overflow-y: auto;\n\n    width: 100%;\n\n\n}\n.input-config-line{\n\n    width: 100%;\n\n    padding: var(--extra-small-padding);\n    box-sizing: border-box;\n\n    border: solid 1px black;\n    border-radius: 3px;\n\n    background-color: white;\n\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n\n    gap:3px;\n\n    margin-top: 5px;\n}\n.input-config-line:hover{\n    border: solid 1px var(--warm-color-1);\n}\n\n\n</style>"],"mappings":"AAyDA,OAAOA,QAAO,MAAO,sBAAqB;AAC1C,OAAOC,YAAW,MAAO,2BAA0B;AACnD,OAAOC,gBAAe,MAAO,yDAAwD;AACrF,eAAc;EACVC,IAAG,EAAI,eAAe;EACtBC,UAAS,EAAI;IACTH,YAAY;IACZC;EACJ,CAAC;EACDG,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,IAAG,EAAI;QACHH,IAAG,EAAI,EAAE;QACTI,MAAK,EAAI;UACLC,EAAC,EAAI;QACT;QACAC,SAAQ,EAAI;UACRD,EAAC,EAAI;QACT,CAAC;QACDE,MAAK,EAAI;UACLF,EAAC,EAAI;QACT,CAAC;QACDG,MAAK,EAAI;MACb,CAAC;MAEDC,eAAc,EAAI,KAAK;MACvBC,gBAAe,EAAI;IACvB;EACJ,CAAC;EACDC,KAAI,EAAI;IACJ;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAAA,CACH;EACDC,WAAWA,CAAA,EAAE;IACT;;IAEA,IAAIC,QAAO,GAAI,YAAY,GAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACV,EAAE,GAAC,QAAQ,GAAC,IAAI,CAACS,MAAM,CAACC,MAAM,CAACC,MAAK;IACpFnB,QAAQ,CAACoB,GAAG,CAACJ,QAAQ,EAAC,KAAK,EAC1BK,IAAI,CAAEC,GAAG,IAAG;MACT,IAAI,CAAChB,IAAI,GAAEgB,GAAG;IAClB,CAAC;EACL,CAAC;EACDC,OAAM,EAAI;IACNC,UAAUA,CAAA,EAAE;MAER,KAAI,IAAIC,KAAI,IAAK,IAAI,CAACnB,IAAI,CAACK,MAAM,EAAC;QAC9B,IAAGc,KAAK,CAACC,YAAW,IAAK,IAAI,EAAC;UAC1BD,KAAK,CAACE,WAAU,GAAIF,KAAK,CAACG,UAAU;QACxC;MACJ;MAEA,IAAIZ,QAAO,GAAI,uBAAuB;MACtChB,QAAQ,CAAC6B,IAAI,CAACb,QAAQ,EAAC;QACnBc,QAAO,EAAI,IAAI,CAACb,MAAM,CAACC,MAAM,CAACV,EAAE;QAChCD,MAAK,EAAI,IAAI,CAACD,IAAI,CAACC,MAAM;QACzBG,MAAK,EAAI,IAAI,CAACJ,IAAI,CAACI,MAAM;QACzBD,SAAQ,EAAI,IAAI,CAACH,IAAI,CAACG,SAAS;QAC/BN,IAAG,EAAI,IAAI,CAACG,IAAI,CAACH,IAAI;QACrBQ,MAAK,EAAI,IAAI,CAACL,IAAI,CAACK;MACvB,CAAC,EACD,IAAI,EACJ,KAAK,EACJU,IAAI,CAAEU,GAAG,IAAG;QAETC,OAAO,CAACC,GAAG,CAACF,GAAG;MACnB,CAAC;IAEL;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}